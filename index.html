<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Johan game â€“ Mines</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --pink:#f8b6d2;
  --pink-soft:#fde7f1;
  --pink-dark:#f29bc1;
  --green:#7dd3a7;
  --red:#ff6b6b;
}

* {
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
}

body {
  margin:0;
  background:linear-gradient(180deg,#fde7f1,#f8b6d2);
  display:flex;
  justify-content:center;
}

.app {
  width:100%;
  max-width:420px;
  padding:16px;
}

h1 {
  text-align:center;
  margin-bottom:12px;
}

.balance {
  background:rgba(255,255,255,.7);
  backdrop-filter:blur(8px);
  border-radius:16px;
  padding:12px;
  text-align:center;
  font-weight:600;
  margin-bottom:16px;
  transition:.3s;
}

.balance.win {
  background:rgba(125,211,167,.7);
}

.controls {
  background:rgba(255,255,255,.6);
  border-radius:16px;
  padding:12px;
}

.control-row {
  display:flex;
  justify-content:space-between;
  margin-bottom:8px;
}

input,select {
  border:none;
  border-radius:12px;
  padding:6px 10px;
}

button {
  width:100%;
  border:none;
  border-radius:16px;
  padding:12px;
  font-weight:600;
  background:var(--pink-dark);
  color:white;
  cursor:pointer;
  transition:.2s;
}

button:hover { transform:scale(1.02); }
button:disabled { opacity:.5; }

.grid {
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:8px;
  margin-top:16px;
}

.cell {
  aspect-ratio:1/1;
  border-radius:14px;
  background:rgba(255,255,255,.8);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  cursor:pointer;
  transition:.2s;
}

.cell:hover {
  transform:scale(1.05);
}

.cell.open.safe {
  background:var(--green);
  animation:pop .3s ease;
}

.cell.open.mine {
  background:var(--red);
  animation:shake .4s;
}

.info {
  margin-top:12px;
  text-align:center;
  font-weight:600;
  transition:.3s;
}

.cashout {
  margin-top:12px;
  background:var(--green);
}

@keyframes pop {
  0%{transform:scale(.5);}
  100%{transform:scale(1);}
}

@keyframes shake {
  0%{transform:translateX(0);}
  25%{transform:translateX(-5px);}
  50%{transform:translateX(5px);}
  75%{transform:translateX(-5px);}
  100%{transform:translateX(0);}
}
</style>
</head>

<body>
<div class="app">
<h1>ðŸ’£ Johan Mines</h1>

<div class="balance" id="balanceBox">
Balance: <span id="balance">10.00</span> TON (demo)
</div>

<div class="controls">
<div class="control-row">
<label>Bet</label>
<input id="betInput" type="number" value="0.1" step="0.01">
</div>
<div class="control-row">
<label>Mines</label>
<select id="minesSelect">
<option>1</option><option>3</option><option selected>5</option>
<option>10</option><option>15</option><option>20</option><option>24</option>
</select>
</div>
<button id="startBtn">Start Game</button>
</div>

<div class="grid" id="grid"></div>

<div class="info">
Multiplier: <span id="multiplier">1.00</span>x
</div>

<button class="cashout" id="cashoutBtn" disabled>Cash Out</button>
</div>

<script>
const grid=document.getElementById("grid");
const balanceEl=document.getElementById("balance");
const balanceBox=document.getElementById("balanceBox");
const multiplierEl=document.getElementById("multiplier");
const cashoutBtn=document.getElementById("cashoutBtn");

let balance=10,bet=0,mines=0,opened=0,active=false,multi=1,minesPos=[];

function update(){
 balanceEl.textContent=balance.toFixed(2);
 multiplierEl.textContent=multi.toFixed(2);
}

function start(){
 bet=+betInput.value;
 mines=+minesSelect.value;
 if(bet<=0||bet>balance) return alert("Invalid bet");
 balance-=bet; update();
 opened=0; multi=1; active=true;
 grid.innerHTML=""; cashoutBtn.disabled=false;
 minesPos=[];
 while(minesPos.length<mines){
  let r=Math.floor(Math.random()*25);
  if(!minesPos.includes(r)) minesPos.push(r);
 }
 for(let i=0;i<25;i++){
  let c=document.createElement("div");
  c.className="cell";
  c.onclick=()=>click(c,i);
  grid.appendChild(c);
 }
}

function click(cell,i){
 if(!active||cell.classList.contains("open"))return;
 cell.classList.add("open");
 if(minesPos.includes(i)){
  cell.classList.add("mine");
  cell.textContent="ðŸ’£";
  active=false;
  cashoutBtn.disabled=true;
 } else {
  cell.classList.add("safe");
  cell.textContent="ðŸ’Ž";
  opened++;
  multi=Math.pow(25/(25-mines),opened);
  update();
 }
}

cashoutBtn.onclick=()=>{
 if(!active)return;
 balance+=bet*multi;
 active=false;
 cashoutBtn.disabled=true;
 balanceBox.classList.add("win");
 setTimeout(()=>balanceBox.classList.remove("win"),600);
 update();
}

startBtn.onclick=start;
update();
</script>
</body>
</html>
