<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Johan Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
  --pink: #ff9ccd;
  --pink-dark: #ff6bb5;
  --pink-light: #ffe6f3;
  --dark-bg: #0f001a;
  --win: #00ff9d;
  --lose: #ff3366;
}

* { margin:0; padding:0; box-sizing:border-box; }
body {
  background: linear-gradient(135deg, #1a0033, #330066, #4d0099);
  color: white;
  font-family: 'Segoe UI', system-ui, sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
  background-image: 
    radial-gradient(circle at 20% 30%, rgba(255,105,180,0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 70%, rgba(138,43,226,0.12) 0%, transparent 50%);
}

h1 {
  font-size: 3.8rem;
  text-align: center;
  padding: 20px 0;
  background: linear-gradient(90deg, #ff9ccd, #ff6bb5, #d946ef);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 20px rgba(255,105,180,0.6);
  animation: glow 3s ease-in-out infinite alternate;
}

@keyframes glow {
  from { text-shadow: 0 0 10px #ff6bb5, 0 0 20px #d946ef; }
  to   { text-shadow: 0 0 20px #ff6bb5, 0 0 40px #d946ef; }
}

h2 { font-size: 2.2rem; margin: 20px 0; color: #ff9ccd; }
h3 { font-size: 1.6rem; color: #ccc; }

button {
  padding: 14px 32px;
  margin: 12px;
  font-size: 1.2rem;
  font-weight: bold;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  transition: all 0.3s;
  background: linear-gradient(45deg, #ff6bb5, #d946ef);
  color: white;
  box-shadow: 0 6px 20px rgba(255,105,180,0.4);
}

button:hover { transform: translateY(-4px) scale(1.05); box-shadow: 0 12px 30px rgba(255,105,180,0.6); }
button:active { transform: translateY(0) scale(0.98); }
button:disabled { opacity: 0.5; cursor: not-allowed; box-shadow: none; }

input[type="number"], select {
  padding: 12px 16px;
  font-size: 1.1rem;
  border-radius: 12px;
  border: 2px solid #ff6bb5;
  background: rgba(255,255,255,0.1);
  color: white;
  margin: 10px;
}

.screen { display: none; text-align: center; padding: 20px; }
.active { display: block; }

.lobby-container {
  max-width: 700px;
  margin: 40px auto;
  padding: 40px;
  background: rgba(20,0,40,0.6);
  border-radius: 30px;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,105,180,0.3);
  box-shadow: 0 20px 60px rgba(0,0,0,0.6);
}

#crash-game canvas {
  border-radius: 20px;
  border: 3px solid #ff6bb5;
  box-shadow: 0 0 40px rgba(255,105,180,0.5);
  margin: 20px auto;
  display: block;
  background: #0a0014;
}

#crash-multi {
  font-size: 3.5rem;
  font-weight: bold;
  background: linear-gradient(90deg, #ff9ccd, #ff6bb5, #d946ef, #ff9ccd);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: gradient 4s linear infinite;
}

@keyframes gradient {
  0% { background-position: 0% 50%; }
  100% { background-position: 200% 50%; }
}

.message {
  font-size: 1.4rem;
  padding: 16px;
  margin: 20px auto;
  max-width: 500px;
  border-radius: 15px;
}

.message-win { background: rgba(0,255,157,0.25); border: 2px solid #00ff9d; }
.message-lose { background: rgba(255,51,102,0.25); border: 2px solid #ff3366; }
</style>
</head>
<body>

<h1>Johan Game</h1>
<h3>TON: <span id="ton">100.0</span></h3>

<!-- –ì–ª–∞–≤–Ω–æ–µ –ª–æ–±–±–∏ -->
<div id="lobby" class="active lobby-container">
  <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
  <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∏–≥—Ä—ã:</p>
  <button onclick="document.getElementById('lobby').classList.remove('active'); document.getElementById('mines-lobby').classList.add('active');">Mines</button>
  <button onclick="document.getElementById('lobby').classList.remove('active'); document.getElementById('crash-lobby').classList.add('active');">Crash</button>
</div>

<!-- –õ–æ–±–±–∏ Mines -->
<div id="mines-lobby" class="screen">
  <h2>Mines</h2>
  <label>–°—Ç–∞–≤–∫–∞ (0.1‚Äì10 TON):</label><br>
  <input type="number" id="mines-bet" min="0.1" max="10" step="0.1" value="1"><br><br>
  <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–Ω:</label><br>
  <select id="mines-count">
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
  </select><br><br>
  <button onclick="startMines()">–ò–≥—Ä–∞—Ç—å</button>
  <button onclick="document.getElementById('mines-lobby').classList.remove('active'); document.getElementById('lobby').classList.add('active');">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- –ò–≥—Ä–∞ Mines (—É–ø—Ä–æ—â—ë–Ω–Ω–æ, –æ—Å—Ç–∞–≤–∏–ª –∫–∞–∫ –±—ã–ª–æ) -->
<div id="mines-game" class="screen">
  <h2>Mines</h2>
  <p>–û—Ç–∫—Ä—ã—Ç–æ —è—á–µ–µ–∫: <span id="opened">0</span></p>
  <p>–ú–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="multi">1.00x</span></p>
  <div id="mines-message" class="message"></div>
  <button id="mines-cashout" onclick="cashoutMines()" style="background:#ff6bb5;">–ó–∞–±—Ä–∞—Ç—å üí∞</button>
  <div id="minesGrid" style="margin:30px auto; max-width:360px;"></div>
  <button onclick="document.getElementById('mines-game').classList.remove('active'); document.getElementById('lobby').classList.add('active');">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- –õ–æ–±–±–∏ Crash -->
<div id="crash-lobby" class="screen">
  <h2>Crash</h2>
  <label>–°—Ç–∞–≤–∫–∞ (0.1‚Äì10 TON):</label><br>
  <input type="number" id="crash-bet" min="0.1" max="10" step="0.1" value="1"><br><br>
  <button onclick="startCrash()">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–∞–∫–µ—Ç—É</button>
  <button onclick="document.getElementById('crash-lobby').classList.remove('active'); document.getElementById('lobby').classList.add('active');">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<!-- –ò–≥—Ä–∞ Crash -->
<div id="crash-game" class="screen">
  <h2>Crash</h2>
  <p>–¢–µ–∫—É—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="crash-multi">1.00x</span></p>
  <div id="crash-message" class="message"></div>
  <canvas id="crashCanvas" width="400" height="600"></canvas>
  <button id="crash-cashout" onclick="crashCashout()">–ó–∞–±—Ä–∞—Ç—å üí∞</button>
  <button onclick="document.getElementById('crash-game').classList.remove('active'); document.getElementById('lobby').classList.add('active');">‚Üê –ù–∞–∑–∞–¥</button>
</div>

<script>
// –û–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
let ton = 100;
document.getElementById("ton").textContent = ton.toFixed(1);

function showMessage(id, text, type = "lose") {
  const msg = document.getElementById(id + "-message");
  msg.textContent = text;
  msg.className = "message " + (type === "win" ? "message-win" : "message-lose");
  setTimeout(() => msg.textContent = "", 4000);
}

// Mines (—É–ø—Ä–æ—â—ë–Ω–Ω–æ, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
function startMines() {
  alert("Mines –∑–∞–ø—É—â–µ–Ω (–ª–æ–≥–∏–∫–∞ –∫–∞–∫ —Ä–∞–Ω—å—à–µ)");
  // –ó–¥–µ—Å—å –≤–∞—à–∞ —Å—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ Mines
}

function cashoutMines() {
  alert("Cashout Mines");
}

// Crash ‚Äî —É–ª—É—á—à–µ–Ω–Ω–∞—è —Ä–∞–∫–µ—Ç–∞
let crashRunning = false;
let crashMultiplier = 1;
let crashBet = 0;
let crashCrashPoint = 0;

function startCrash() {
  crashBet = parseFloat(document.getElementById("crash-bet").value);
  if (isNaN(crashBet) || crashBet < 0.1 || crashBet > 10) {
    return showMessage("crash", "–°—Ç–∞–≤–∫–∞ –æ—Ç 0.1 –¥–æ 10 TON!", "lose");
  }
  if (ton < crashBet) return showMessage("crash", "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ TON!", "lose");

  ton -= crashBet;
  document.getElementById("ton").textContent = ton.toFixed(1);

  crashMultiplier = 1;
  crashRunning = true;
  crashCrashPoint = 1.05 + Math.pow(Math.random(), 3) * 50; // –∫—Ä–∞—Å–∏–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

  document.getElementById("crash-multi").textContent = "1.00x";
  document.getElementById("crash-cashout").disabled = false;

  const canvas = document.getElementById("crashCanvas");
  const ctx = canvas.getContext("2d");
  let time = 0;
  let shake = 0;

  function drawRocket() {
    ctx.fillStyle = "rgba(10,0,20,0.15)";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    time += 0.016;

    // –ú–Ω–æ–∂–∏—Ç–µ–ª—å
    crashMultiplier *= 1.008 + (time * 0.0003);
    document.getElementById("crash-multi").textContent = crashMultiplier.toFixed(2) + "x";

    if (crashMultiplier >= crashCrashPoint) {
      crashRunning = false;
      document.getElementById("crash-cashout").disabled = true;
      showMessage("crash", `üí• –ö–†–ê–® –Ω–∞ ${crashMultiplier.toFixed(2)}x! -${crashBet.toFixed(1)} TON`, "lose");

      // –í–∑—Ä—ã–≤
      for(let i = 0; i < 100; i++) {
        ctx.fillStyle = `hsl(${Math.random()*60},100%,${50+Math.random()*50}%)`;
        ctx.fillRect(Math.random()*canvas.width, Math.random()*canvas.height, 8, 8);
      }
      setTimeout(() => {
        document.getElementById("crash-game").classList.remove("active");
        document.getElementById("lobby").classList.add("active");
      }, 3000);
      return;
    }

    // –¢—Ä—è—Å–∫–∞ –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö –∏–∫—Å–∞—Ö
    if (crashMultiplier > 8) shake = (Math.random()-0.5)*8;

    // –†–∞–∫–µ—Ç–∞
    const x = canvas.width/2 + shake;
    const y = canvas.height - 120 - (crashMultiplier * 12);

    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(Math.sin(time*5)*0.08);

    // –ü–ª–∞–º—è
    const flameSize = 50 + Math.sin(time*15)*15;
    const grad = ctx.createLinearGradient(0,0,0,flameSize);
    grad.addColorStop(0,"#ffff00");
    grad.addColorStop(0.4,"#ff8800");
    grad.addColorStop(1,"#ff0000");

    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.moveTo(0, 40);
    ctx.quadraticCurveTo(-30, flameSize, 0, flameSize+40);
    ctx.quadraticCurveTo(30, flameSize, 0, 40);
    ctx.fill();

    // –ö–æ—Ä–ø—É—Å
    ctx.fillStyle = "#ff6bb5";
    ctx.beginPath();
    ctx.moveTo(0,-60);
    ctx.lineTo(-20,30);
    ctx.lineTo(20,30);
    ctx.closePath();
    ctx.fill();

    // –û–∫–Ω–æ
    ctx.fillStyle = "#a0e0ff";
    ctx.beginPath();
    ctx.arc(0,-20,12,0,Math.PI*2);
    ctx.fill();

    ctx.restore();

    if (crashRunning) requestAnimationFrame(drawRocket);
  }

  drawRocket();
  document.getElementById("crash-lobby").classList.remove("active");
  document.getElementById("crash-game").classList.add("active");
}

function crashCashout() {
  if (!crashRunning) return;
  crashRunning = false;
  const win = (crashBet * crashMultiplier).toFixed(1);
  ton += Number(win);
  document.getElementById("ton").textContent = ton.toFixed(1);
  showMessage("crash", `–ó–∞–±—Ä–∞–ª–∏ –Ω–∞ ${crashMultiplier.toFixed(2)}x! +${win} TON! üöÄ`, "win");
  document.getElementById("crash-cashout").disabled = true;
  setTimeout(() => {
    document.getElementById("crash-game").classList.remove("active");
    document.getElementById("lobby").classList.add("active");
  }, 3000);
}
</script>
</body>
</html>
