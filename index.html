<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Johan Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:#ffb3d9;
  font-family:Arial;
  color:white;
  text-align:center;
}
nav{
  display:flex;
  justify-content:space-around;
  background:#ff6fbd;
  padding:12px;
  font-weight:bold;
}
.screen{display:none;}
button{
  background:#ff4fb2;
  border:none;
  color:white;
  padding:15px 22px;
  margin:8px;
  font-size:18px;
  border-radius:8px;
  cursor:pointer;
}

/* MINES */
.grid{
  display:grid;
  grid-template-columns:repeat(5,60px);
  gap:6px;
  justify-content:center;
}
.cell{
  width:60px;height:60px;
  background:#ffa0d6;
  border-radius:8px;
  cursor:pointer;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:22px;
}

/* BLINKO */
#blinkoField{
  margin:auto;
  width:300px;
  height:400px;
  background:#ffc9e8;
  border-radius:20px;
  position:relative;
  overflow:hidden;
}

/* BALL ESCAPE */
#circle{
  width:310px;
  height:310px;
  border-radius:50%;
  border:20px solid #ff0095;
  margin:auto;
  position:relative;
  overflow:hidden;
}
#escBall{
  width:28px;
  height:28px;
  background:cyan;
  border-radius:50%;
  position:absolute;
  left:140px; top:140px;
}
#hole{
  width:90px;
  height:40px;
  background:lime;
  position:absolute;
  left:110px;
  top:-20px;
}
</style>

</head>
<body>

<nav>
  <div onclick="show('home')">Lobby</div>
  <div onclick="show('mines')">Mines</div>
  <div onclick="show('blinko')">Blinko</div>
  <div onclick="show('escape')">Ball Escape</div>
</nav>

<h2>Balance: <span id="bal">100</span></h2>

<!-- HOME -->
<div id="home" class="screen">
  <h1>Johan Games</h1>
  <p>Pick a game below</p>
</div>

<!-- MINES -->
<div id="mines" class="screen">
  <h1>Mines</h1>
  <button onclick="startMines()">Start</button>
  <h3 id="mineMsg"></h3>
  <div id="mineGrid" class="grid"></div>
</div>

<!-- BLINKO -->
<div id="blinko" class="screen">
  <h1>Blinko</h1>
  <button onclick="startBlinko()">Drop Ball</button>
  <div id="blinkoField"></div>
  <h3 id="blinkoMsg"></h3>
</div>

<!-- BALL ESCAPE -->
<div id="escape" class="screen">
  <h1>Ball Escape</h1>
  <button onclick="startEscape()">Start</button>
  <div id="circle">
    <div id="hole"></div>
    <div id="escBall"></div>
  </div>
  <h3 id="escMsg"></h3>
</div>

<script>

let bal = 100;
function upd(){ document.getElementById("bal").innerHTML = bal; }
upd();

function show(x){
  document.querySelectorAll(".screen")
          .forEach(s=>s.style.display="none");
  document.getElementById(x).style.display="block";
}
show("home");

/************* MINES *************/
let minesMap=[];
function startMines(){
  if(bal<1) return;
  bal-=1; upd();
  minesMap=[];
  document.getElementById("mineMsg").innerHTML="";
  let grid=document.getElementById("mineGrid");
  grid.innerHTML="";
  for(let i=0;i<25;i++){
    minesMap.push(Math.random()<0.2);
    let c=document.createElement("div");
    c.className="cell";
    c.onclick=function(){
      if(minesMap[i]){
        c.style.background="red";
        document.getElementById("mineMsg").innerHTML="Lose";
      }else{
        c.style.background="lime";
        bal+=2; upd();
        document.getElementById("mineMsg").innerHTML="Win +2";
      }
    };
    grid.append(c);
  }
}

/************* BLINKO *************/
function startBlinko(){
  if(bal<1)return;
  bal-=1; upd();

  let f=document.getElementById("blinkoField");
  f.innerHTML="";

  let b=document.createElement("div");
  b.style.width="25px";
  b.style.height="25px";
  b.style.borderRadius="50%";
  b.style.background="cyan";
  b.style.position="absolute";
  b.style.left="140px";
  b.style.top="0px";

  f.append(b);

  let x=140,y=0,speed=6;

  let drop=setInterval(()=>{
    y+=speed;
    x+=Math.random()*10-5;
    b.style.top=y+"px";
    b.style.left=x+"px";

    if(y>370){
      clearInterval(drop);
      let zone=Math.floor((x+20)/50);
      if(zone==3){
        bal+=3; upd();
        blinkoMsg.innerHTML="Win 2x";
      }
      else if(zone==2 || zone==4){
        bal+=2; upd();
        blinkoMsg.innerHTML="Win 1.5x";
      }
      else blinkoMsg.innerHTML="Lose";
    }

  },40);
}

/************* BALL ESCAPE *************/
let spin;
function startEscape(){
  if(bal<1)return;
  bal-=1; upd();

  escMsg.innerHTML="";
  let a=0;
  clearInterval(spin);

  spin=setInterval(()=>{
    a+=3;
    hole.style.transform="rotate("+a+"deg)";
  },40);

  let bx=140,by=140,dx=4,dy=4;
  let bounce=setInterval(()=>{
    bx+=dx; by+=dy;

    if(bx<0||bx>280) dx*=-1;
    if(by<0||by>280) dy*=-1;

    escBall.style.left=bx+"px";
    escBall.style.top=by+"px";

    if(by < 0 && Math.abs(bx-140) < 60){
      clearInterval(bounce);
      clearInterval(spin);
      bal+=3; upd();
      escMsg.innerHTML="WIN!";
    }

    if(bx<0||bx>300||by<0||by>300){
      clearInterval(bounce);
      clearInterval(spin);
      escMsg.innerHTML="LOSE";
    }

  },30);
}

</script>

</body>
</html>
