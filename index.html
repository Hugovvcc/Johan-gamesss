<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Johan Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
  --pink: #ff9ccd;
  --pink-dark: #ff6bb5;
  --bg-dark: #0f001a;
  --text: #ff9ccd;
  --win: #00ff9d;
  --lose: #ff3366;
}

body {
  margin: 0;
  background: linear-gradient(135deg, #1a0033, #330066);
  color: var(--text);
  font-family: system-ui, sans-serif;
  min-height: 100vh;
}

h1 {
  text-align: center;
  font-size: 2.8rem;
  margin: 15px 0 5px;
  background: linear-gradient(90deg, var(--pink), var(--pink-dark));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.container { max-width: 700px; margin: 0 auto; padding: 15px; }

.section {
  background: rgba(20,0,40,0.7);
  border-radius: 20px;
  padding: 20px;
  margin: 15px 0;
  border: 1px solid rgba(255,105,180,0.3);
}

button {
  padding: 12px 26px;
  margin: 8px 4px;
  font-size: 1.1rem;
  border: none;
  border-radius: 50px;
  background: linear-gradient(45deg, var(--pink), var(--pink-dark));
  color: white;
  cursor: pointer;
  transition: all 0.25s;
}

button:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(255,105,180,0.5); }

input, select {
  padding: 10px 14px;
  font-size: 1.1rem;
  border-radius: 12px;
  border: 2px solid var(--pink);
  background: rgba(255,255,255,0.08);
  color: var(--text);
  margin: 8px 0;
}

#minesGrid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  max-width: 380px;
  margin: 20px auto;
}

.minecell {
  aspect-ratio: 1;
  background: rgba(255,255,255,0.12);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 2.2rem;
  cursor: pointer;
  transition: all 0.2s;
}

.minecell:hover { background: rgba(255,105,180,0.25); transform: scale(1.05); }

#crashCanvas {
  width: 100%;
  max-width: 420px;
  height: 480px;
  margin: 20px auto;
  display: block;
  border-radius: 16px;
  border: 3px solid var(--pink-dark);
  background: #0a0014;
}

.multiplier {
  font-size: 3.5rem;
  font-weight: bold;
  text-align: center;
  margin: 15px 0;
  background: linear-gradient(90deg, #ff9ccd, #ff6bb5, #d946ef);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.message {
  font-size: 1.3rem;
  padding: 14px;
  border-radius: 12px;
  margin: 15px 0;
  text-align: center;
}

.win { background: rgba(0,255,157,0.25); border: 2px solid var(--win); }
.lose { background: rgba(255,51,102,0.25); border: 2px solid var(--lose); }

.controls { display: flex; justify-content: center; flex-wrap: wrap; margin-top: 15px; }
</style>
</head>
<body>

<div class="container">

  <h1>Johan Game</h1>
  <h3>TON: <span id="ton">100.0</span></h3>

  <!-- Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ° -->
  <div class="section" id="mode-select">
    <h2>Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸ Ğ¸Ğ³Ñ€Ñƒ</h2>
    <button onclick="showSection('mines')">Mines</button>
    <button onclick="showSection('crash')">Crash</button>
  </div>

  <!-- Mines -->
  <div class="section" id="mines-section" style="display:none;">
    <h2>Mines</h2>
    
    <div style="display:flex; gap:15px; flex-wrap:wrap; justify-content:center;">
      <div>
        <label>Ğ¡Ñ‚Ğ°Ğ²ĞºĞ°:</label><br>
        <input type="number" id="mines-bet" min="0.1" max="10" step="0.1" value="1">
      </div>
      <div>
        <label>ĞœĞ¸Ğ½Ñ‹:</label><br>
        <select id="mines-count">
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
        </select>
      </div>
    </div>

    <div class="controls">
      <button onclick="startMines()">Ğ¡Ñ‚Ğ°Ñ€Ñ‚</button>
      <button id="mines-cashout" onclick="cashoutMines()" disabled>Ğ—Ğ°Ğ±Ñ€Ğ°Ñ‚ÑŒ</button>
      <button onclick="showSection('mode-select')">Ğ’Ñ‹Ğ¹Ñ‚Ğ¸ Ğ² Ğ»Ğ¾Ğ±Ğ±Ğ¸</button>
    </div>

    <p style="margin:15px 0;">ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ğ¾: <span id="opened">0</span> | Ã—<span id="multi">1.00</span></p>
    <div id="mines-message" class="message"></div>
    <div id="minesGrid"></div>
  </div>

  <!-- Crash -->
  <div class="section" id="crash-section" style="display:none;">
    <h2>Crash</h2>
    
    <div style="display:flex; gap:15px; justify-content:center;">
      <div>
        <label>Ğ¡Ñ‚Ğ°Ğ²ĞºĞ°:</label><br>
        <input type="number" id="crash-bet" min="0.1" max="10" step="0.1" value="1">
      </div>
    </div>

    <div class="controls">
      <button onclick="startCrash()">Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ</button>
      <button id="crash-cashout" onclick="crashCashout()" disabled>Ğ—Ğ°Ğ±Ñ€Ğ°Ñ‚ÑŒ</button>
      <button onclick="showSection('mode-select')">Ğ’Ñ‹Ğ¹Ñ‚Ğ¸ Ğ² Ğ»Ğ¾Ğ±Ğ±Ğ¸</button>
    </div>

    <div class="multiplier" id="crash-multi">1.00x</div>
    <div id="crash-message" class="message"></div>
    <canvas id="crashCanvas" width="400" height="480"></canvas>
  </div>

</div>

<script>
let ton = 100;
document.getElementById("ton").textContent = ton.toFixed(1);

function showSection(id) {
  document.querySelectorAll('.section').forEach(s => s.style.display = 'none');
  document.getElementById(id).style.display = 'block';
}

// â”€â”€ MINES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startMines() {
  const bet = +document.getElementById('mines-bet').value;
  const count = +document.getElementById('mines-count').value;

  if (isNaN(bet) || bet < 0.1 || bet > 10) return alert("Ğ¡Ñ‚Ğ°Ğ²ĞºĞ° 0.1â€“10 TON");
  if (ton < bet) return alert("ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ TON");

  ton -= bet;
  document.getElementById("ton").textContent = ton.toFixed(1);

  let mines = new Set();
  while (mines.size < count) mines.add(Math.floor(Math.random() * 25));

  let opened = 0;
  let mult = 1;

  const grid = document.getElementById("minesGrid");
  grid.innerHTML = "";

  for (let i = 0; i < 25; i++) {
    const c = document.createElement("div");
    c.className = "minecell";
    c.textContent = "?";
    c.onclick = () => {
      if (c.dataset.done) return;
      c.dataset.done = "1";

      if (mines.has(i)) {
        c.textContent = "ğŸ’£";
        c.style.background = "rgba(255,80,120,0.6)";
        document.getElementById("mines-cashout").disabled = true;
        document.getElementById("mines-message").innerHTML = `Ğ‘Ğ£Ğœ! -${bet.toFixed(1)} TON`;
        document.getElementById("mines-message").className = "message lose";
      } else {
        opened++;
        mult *= 1.02;
        c.textContent = "ğŸ’";
        c.style.background = "rgba(100,255,180,0.3)";

        document.getElementById("opened").textContent = opened;
        document.getElementById("multi").textContent = mult.toFixed(2);
      }
    };
    grid.appendChild(c);
  }

  document.getElementById("mines-cashout").disabled = false;
  document.getElementById("mines-message").textContent = "";
}

function cashoutMines() {
  const mult = +document.getElementById("multi").textContent;
  const bet = +document.getElementById("mines-bet").value;
  const win = (bet * mult).toFixed(1);

  ton += +win;
  document.getElementById("ton").textContent = ton.toFixed(1);

  document.getElementById("mines-message").innerHTML = `+${win} TON Ğ½Ğ° ${mult.toFixed(2)}Ã—!`;
  document.getElementById("mines-message").className = "message win";
  document.getElementById("mines-cashout").disabled = true;
}

// â”€â”€ CRASH â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function startCrash() {
  const bet = +document.getElementById("crash-bet").value;
  if (isNaN(bet) || bet < 0.1 || bet > 10) return alert("Ğ¡Ñ‚Ğ°Ğ²ĞºĞ° 0.1â€“10 TON");
  if (ton < bet) return alert("ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ TON");

  ton -= bet;
  document.getElementById("ton").textContent = ton.toFixed(1);

  let mult = 1;
  let crashed = false;
  const crashAt = 1.05 + Math.pow(Math.random(), 2.8) * 80;

  document.getElementById("crash-multi").textContent = "1.00x";
  document.getElementById("crash-cashout").disabled = false;

  const c = document.getElementById("crashCanvas");
  const ctx = c.getContext("2d");
  let rocketY = c.height - 100;
  let time = 0;

  function loop() {
    if (crashed) return;

    ctx.fillStyle = "rgba(10,0,20,0.18)";
    ctx.fillRect(0,0,c.width,c.height);

    time += 0.016;
    mult *= 1.004 + time*0.00008; // Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ€Ğ¾ÑÑ‚
    document.getElementById("crash-multi").textContent = mult.toFixed(2) + "x";

    if (mult >= crashAt) {
      crashed = true;
      document.getElementById("crash-cashout").disabled = true;
      document.getElementById("crash-message").innerHTML = `ĞšĞ ĞĞ¨ Ğ½Ğ° ${mult.toFixed(2)}x! -${bet.toFixed(1)} TON`;
      document.getElementById("crash-message").className = "message lose";
      return;
    }

    rocketY -= 0.8 + mult * 0.12; // Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½ĞµĞµ Ğ¿Ğ¾Ğ»Ñ‘Ñ‚

    ctx.save();
    ctx.translate(c.width/2, rocketY);
    ctx.rotate(Math.sin(time*4)*0.07);

    // ĞĞ³Ğ¾Ğ½ÑŒ
    const flame = 50 + Math.sin(time*12)*12;
    const g = ctx.createLinearGradient(0,0,0,flame);
    g.addColorStop(0,"#ffffaa");
    g.addColorStop(0.4,"#ffaa00");
    g.addColorStop(1,"#cc0000");
    ctx.fillStyle = g;
    ctx.beginPath();
    ctx.moveTo(0,30);
    ctx.quadraticCurveTo(-35,flame,0,flame+40);
    ctx.quadraticCurveTo(35,flame,0,30);
    ctx.fill();

    // ĞšĞ¾Ñ€Ğ¿ÑƒÑ Ñ€Ğ°ĞºĞµÑ‚Ñ‹
    ctx.fillStyle = "#ff6bb5";
    ctx.beginPath();
    ctx.moveTo(0,-80);
    ctx.quadraticCurveTo(-25,-10,-20,35);
    ctx.lineTo(20,35);
    ctx.quadraticCurveTo(25,-10,0,-80);
    ctx.fill();

    // ĞĞºĞ½Ğ¾
    ctx.fillStyle = "#aaffff";
    ctx.beginPath();
    ctx.arc(0,-30,14,0,Math.PI*2);
    ctx.fill();

    ctx.restore();

    requestAnimationFrame(loop);
  }

  loop();
}

function crashCashout() {
  const mult = parseFloat(document.getElementById("crash-multi").textContent);
  const bet = +document.getElementById("crash-bet").value;
  const win = (bet * mult).toFixed(1);

  ton += +win;
  document.getElementById("ton").textContent = ton.toFixed(1);

  document.getElementById("crash-message").innerHTML = `+${win} TON Ğ½Ğ° ${mult.toFixed(2)}Ã—!`;
  document.getElementById("crash-message").className = "message win";
  document.getElementById("crash-cashout").disabled = true;
}
</script>
</body>
</html>
