<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Johan Mines</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

:root {
 --pink:#f8b6d2;
 --pink-soft:#fde7f1;
 --pink-dark:#f29bc1;
 --green:#7dd3a7;
 --red:#ff6b6b;
}

* { box-sizing:border-box; font-family:-apple-system,BlinkMacSystemFont,Roboto; }

body {
 margin:0;
 background:linear-gradient(180deg,#fde7f1,#f8b6d2);
 display:flex;
 justify-content:center;
}

.app {
 width:100%;
 max-width:420px;
 padding:16px;
}

h1 {
 text-align:center;
 margin-bottom:12px;
}

.balanceBox {
 background:rgba(255,255,255,.7);
 border-radius:20px;
 padding:14px;
 text-align:center;
 font-size:20px;
 font-weight:700;
 margin-bottom:14px;
}

.controls {
 background:rgba(255,255,255,.6);
 border-radius:20px;
 padding:12px;
}

.row {
 display:flex;
 justify-content:space-between;
 padding:4px 0;
}

input, select {
 padding:6px 10px;
 border:none;
 border-radius:14px;
}

button {
 width:100%;
 padding:14px;
 border:none;
 border-radius:16px;
 background:var(--pink-dark);
 color:white;
 font-size:16px;
 font-weight:700;
 cursor:pointer;
 margin-top:10px;
}

button:hover { transform:scale(1.02); }

.grid {
 display:grid;
 grid-template-columns:repeat(5,1fr);
 gap:8px;
 margin-top:14px;
}

.cell {
 aspect-ratio:1/1;
 background:rgba(255,255,255,.9);
 border-radius:15px;
 display:flex;
 align-items:center;
 justify-content:center;
 font-size:26px;
 cursor:pointer;
 transition:.2s;
}

.cell:hover { transform:scale(1.06); }

.cell.safe {
 background:var(--green);
}

.cell.mine {
 background:var(--red);
}

.info {
 text-align:center;
 font-weight:700;
 margin-top:10px;
 font-size:18px;
}

.cash {
 background:var(--green);
 margin-top:10px;
}

</style>
</head>

<body>
<div class="app">

<h1>ðŸ’Ž Mines</h1>

<div class="balanceBox">
TON Balance: <span id="balance">10.00</span>
</div>

<div class="controls">
 <div class="row">
  <label>Bet (min 0.1)</label>
  <input id="bet" type="number" value="0.1" min="0.1" step="0.1">
 </div>

 <div class="row">
  <label>Mines</label>
  <select id="mines">
   <option>1</option>
   <option>2</option>
   <option>3</option>
   <option>4</option>
   <option selected>5</option>
   <option>6</option>
   <option>7</option>
   <option>8</option>
   <option>9</option>
   <option>10</option>
  </select>
 </div>

 <button id="startBtn">Start Game</button>
</div>

<div class="grid" id="grid"></div>

<div class="info">
Multiplier: <span id="multi">1.00</span>x
</div>

<button id="cashBtn" class="cash" disabled>Cash Out</button>

</div>

<script>

let balance = 10;
let bet = 0;
let mineCount = 0;
let opened = 0;
let active = false;
let minesPos = [];

const balEl = document.getElementById("balance");
const grid = document.getElementById("grid");
const multiEl = document.getElementById("multi");
const cashBtn = document.getElementById("cashBtn");

function updateBalance() {
 balEl.textContent = balance.toFixed(2);
}

updateBalance();

document.getElementById("startBtn").onclick = function() {

 bet = +document.getElementById("bet").value;
 mineCount = +document.getElementById("mines").value;

 if(bet < 0.1 || bet > balance) {
  alert("Invalid bet");
  return;
 }

 active = true;
 opened = 0;
 balance -= bet;

 updateBalance();

 grid.innerHTML = "";
 minesPos = [];
 cashBtn.disabled = false;
 multiEl.textContent = "1.00";

 while(minesPos.length < mineCount) {
  let r = Math.floor(Math.random() * 25);
  if(!minesPos.includes(r)) minesPos.push(r);
 }

 for(let i=0; i<25; i++) {
  let cell = document.createElement("div");
  cell.className = "cell";
  cell.onclick = () => clickCell(cell, i);
  grid.appendChild(cell);
 }

};

function clickCell(cell, index) {

 if(!active || cell.classList.contains("open")) return;

 cell.classList.add("open");

 if(minesPos.includes(index)) {

  cell.classList.add("mine");
  cell.textContent = "ðŸ’£";

  active = false;
  cashBtn.disabled = true;

 } else {

  cell.classList.add("safe");
  cell.textContent = "ðŸ’Ž";

  opened++;

  let multi = Math.pow(25/(25 - mineCount), opened);

  multiEl.textContent = multi.toFixed(2);

 }
}

cashBtn.onclick = function() {

 if(!active) return;

 active = false;
 cashBtn.disabled = true;

 let win = bet * (+multiEl.textContent);

 balance += win;

 updateBalance();
}

</script>

</body>
</html>
