<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mines â€“ Johan Game</title>
<style>
body {
    background: linear-gradient(120deg, #ffd6f6, #ffe9ff);
    font-family: Arial;
    text-align: center;
}

#balanceBox {
    margin-top: 20px;
    font-size: 28px;
    background: white;
    border-radius: 12px;
    padding: 10px 30px;
    display: inline-block;
}

.crystalIcon {
    width: 26px;
    vertical-align: -5px;
}

input, select {
    padding: 8px;
    border-radius: 6px;
    border: 2px solid #ff9be6;
    font-size: 18px;
}

button {
    margin: 10px;
    padding: 12px 25px;
    border-radius: 8px;
    cursor: pointer;
    border: none;
    background: #ff73d9;
    color: white;
    font-size: 19px;
    font-weight: bold;
}

button:hover {
    background:#ff4fce;
}

#grid {
    margin-top: 30px;
    width: 500px;
    margin-left: auto;
    margin-right: auto;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 10px;
}

.cell {
    width: 85px;
    height: 85px;
    background:white;
    border-radius: 10px;
    cursor:pointer;
    transition:0.2s;
}

.cell:hover {
    transform: scale(1.05);
}

.safeCell {
    background:#c9ffe0 !important;
}

.mineCell {
    background:#ff8fa3 !important;
}

</style>
</head>
<body>

<div id="balanceBox">
ðŸ’Ž Balance: <span id="balance">73</span> TON
</div>

<br><br>

Bet TON: 
<input type="number" id="bet" value="0.1" min="0.1" max="10" step="0.1">

&nbsp;&nbsp;&nbsp;

Mines:
<select id="mineCount">
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
<option selected>5</option>
<option>6</option>
<option>7</option>
<option>8</option>
<option>9</option>
<option>10</option>
</select>

<br>

<button onclick="startGame()">Start Game</button>
<button onclick="cashout()">Cashout</button>

<div id="grid"></div>

<script>

let balance = 73;
let gameActive = false;
let mines = [];
let opened = 0;

function startGame() {

    let bet = parseFloat(document.getElementById("bet").value);
    if(bet < 0.1){ alert("Min 0.1 TON"); return; }
    if(bet > balance){ alert("Not enough balance"); return; }

    balance -= bet;
    document.getElementById("balance").innerText = balance.toFixed(2);

    gameActive = true;
    opened = 0;

    mines = [];
    let bombCount = parseInt(document.getElementById("mineCount").value);

    while(mines.length < bombCount){
        let r = Math.floor(Math.random()*25);
        if(!mines.includes(r)) mines.push(r);
    }

    drawGrid();
}

function drawGrid(){
    let grid = document.getElementById("grid");
    grid.innerHTML = "";

    for(let i=0;i<25;i++){
        let cell = document.createElement("div");
        cell.className = "cell";
        cell.id = "cell"+i;
        cell.onclick = function(){ clickCell(i); };
        grid.appendChild(cell);
    }
}

function clickCell(i){

    if(!gameActive) return;

    if(mines.includes(i)){
        document.getElementById("cell"+i).classList.add("mineCell");
        endGame(false);
    } else {
        document.getElementById("cell"+i).classList.add("safeCell");
        opened++;
    }
}

function endGame(win){

    gameActive = false;

    mines.forEach(i=>{
        document.getElementById("cell"+i).classList.add("mineCell");
    });

    if(win == false) {
        alert("ðŸ’¥ Mine hit!");
    }
}

function cashout(){

    if(opened == 0 || !gameActive) return;

    let bet = parseFloat(document.getElementById("bet").value);
    let win = bet * (1 + (opened*0.25));

    balance += win;
    document.getElementById("balance").innerText = balance.toFixed(2);

    alert("You won " + win.toFixed(2) + " TON!");

    gameActive = false;
}

drawGrid();

</script>

</body>
</html>
